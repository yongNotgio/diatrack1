# Notifications Feature - Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DiaTrack App                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Home Screen    â”‚  â”‚ Medication Scr.  â”‚                 â”‚
â”‚  â”‚  (Bell Icon)    â”‚  â”‚ (Bell Icon)      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                    â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ History Screen  â”‚  â”‚ Add Metrics Scr. â”‚                 â”‚
â”‚  â”‚ (Bell Icon)     â”‚  â”‚ (Bell Icon)      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                    â”‚                           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                    â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â”‚ NotificationsScr. â”‚  â—„â”€â”€â”€ NEW SCREEN          â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                            â”‚
â”‚           â”‚ â”‚ Fetch Data  â”‚   â”‚                            â”‚
â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚                            â”‚
â”‚           â”‚        â”‚          â”‚                            â”‚
â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚                            â”‚
â”‚           â”‚ â”‚ Display     â”‚   â”‚                            â”‚
â”‚           â”‚ â”‚ Notifications   â”‚                            â”‚
â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚                            â”‚
â”‚           â”‚        â”‚          â”‚                            â”‚
â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚                            â”‚
â”‚           â”‚ â”‚ Mark Read   â”‚   â”‚                            â”‚
â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                            â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚           â”‚ SupabaseService   â”‚  â—„â”€â”€â”€ 3 NEW METHODS       â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â”‚ â€¢ getNotifications       â”‚                     â”‚
â”‚           â”‚ â€¢ markAsRead              â”‚                     â”‚
â”‚           â”‚ â€¢ markAllAsRead           â”‚                     â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚           â”‚  Supabase Client  â”‚                            â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â”‚  (PostgreSQL DB)  â”‚                            â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚           â”‚ notifications TBL â”‚  â—„â”€â”€â”€ EXISTING TABLE      â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â”‚ Columns:          â”‚                            â”‚
â”‚           â”‚ â€¢ notification_id â”‚                            â”‚
â”‚           â”‚ â€¢ user_id         â”‚                            â”‚
â”‚           â”‚ â€¢ user_role       â”‚                            â”‚
â”‚           â”‚ â€¢ title           â”‚                            â”‚
â”‚           â”‚ â€¢ message         â”‚                            â”‚
â”‚           â”‚ â€¢ type            â”‚                            â”‚
â”‚           â”‚ â€¢ reference_id    â”‚                            â”‚
â”‚           â”‚ â€¢ created_at      â”‚                            â”‚
â”‚           â”‚ â€¢ is_read         â”‚                            â”‚
â”‚           â”‚                   â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Clicks          â”‚
â”‚ Bell Icon ğŸ””         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navigate to                      â”‚
â”‚ NotificationsScreen              â”‚
â”‚ (patientId passed)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ initState() triggers             â”‚
â”‚ _loadNotifications()             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabaseService.                 â”‚
â”‚ getNotifications(userId)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase Query:                  â”‚
â”‚ SELECT * FROM notifications      â”‚
â”‚ WHERE user_id = ?                â”‚
â”‚ ORDER BY created_at DESC         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Returns                 â”‚
â”‚ List of Notifications            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Builds List of               â”‚
â”‚ Notification Cards              â”‚
â”‚ (with icons, colors, times)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Interactions:               â”‚
â”‚                                  â”‚
â”‚ â€¢ Tap notification â†’ Mark read   â”‚
â”‚ â€¢ Pull down â†’ Refresh list       â”‚
â”‚ â€¢ Tap âœ“ â†’ Mark all read          â”‚
â”‚ â€¢ Tap â† â†’ Go back                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     NotificationsScreen            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Properties:                        â”‚
â”‚ - patientId: String                â”‚
â”‚ - _notificationsFuture             â”‚
â”‚ - _supabaseService                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Methods:                           â”‚
â”‚ - initState()                      â”‚
â”‚ - _loadNotifications()             â”‚
â”‚ - _markAsRead()                    â”‚
â”‚ - _markAllAsRead()                 â”‚
â”‚ - _getNotificationIcon()           â”‚
â”‚ - _getNotificationColor()          â”‚
â”‚ - _formatTime()                    â”‚
â”‚ - build()                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
         â”‚                         â”‚
         â”‚                         â”‚
         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SupabaseService   â”‚  â”‚ NotificationModel    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Methods:           â”‚  â”‚ Properties:          â”‚
â”‚                    â”‚  â”‚ - notificationId     â”‚
â”‚ + getNotifications()   â”‚ - userId            â”‚
â”‚ + markAsRead()     â”‚  â”‚ - userRole           â”‚
â”‚ + markAllAsRead()  â”‚  â”‚ - title              â”‚
â”‚                    â”‚  â”‚ - message            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - type               â”‚
                        â”‚ - referenceId        â”‚
                        â”‚ - createdAt          â”‚
                        â”‚ - isRead             â”‚
                        â”‚                      â”‚
                        â”‚ Methods:             â”‚
                        â”‚ + fromMap()          â”‚
                        â”‚ + toMap()            â”‚
                        â”‚ + copyWith()         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        _NotificationsScreenState        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  initState()                            â”‚
â”‚  â””â”€â†’ _loadNotifications()               â”‚
â”‚      â””â”€â†’ setState(() {                  â”‚
â”‚          _notificationsFuture = ...     â”‚
â”‚        })                               â”‚
â”‚                                         â”‚
â”‚  User Action: Tap Notification          â”‚
â”‚  â””â”€â†’ _markAsRead(notificationId)        â”‚
â”‚      â””â”€â†’ markAsRead() in service        â”‚
â”‚          â””â”€â†’ setState(() {              â”‚
â”‚              _loadNotifications()       â”‚
â”‚            })                           â”‚
â”‚                                         â”‚
â”‚  User Action: Pull Refresh              â”‚
â”‚  â””â”€â†’ RefreshIndicator onRefresh        â”‚
â”‚      â””â”€â†’ _loadNotifications()           â”‚
â”‚          â””â”€â†’ setState(() {              â”‚
â”‚              _notificationsFuture = ... â”‚
â”‚            })                           â”‚
â”‚                                         â”‚
â”‚  User Action: Mark All Read             â”‚
â”‚  â””â”€â†’ _markAllAsRead()                   â”‚
â”‚      â””â”€â†’ markAllAsRead() in service     â”‚
â”‚          â””â”€â†’ setState(() {              â”‚
â”‚              _loadNotifications()       â”‚
â”‚            })                           â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Widget Composition

```
NotificationsScreen
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar
â”‚   â”‚   â”œâ”€â”€ Leading (Back button)
â”‚   â”‚   â”œâ”€â”€ Title (Logo)
â”‚   â”‚   â””â”€â”€ Actions
â”‚   â”‚       â””â”€â”€ Mark All Read Button
â”‚   â”‚
â”‚   â””â”€â”€ Body (FutureBuilder)
â”‚       â”œâ”€â”€ ConnectionState.waiting
â”‚       â”‚   â””â”€â”€ CircularProgressIndicator
â”‚       â”‚
â”‚       â”œâ”€â”€ ConnectionState.error
â”‚       â”‚   â””â”€â”€ Error Widget with Retry
â”‚       â”‚
â”‚       â””â”€â”€ ConnectionState.done
â”‚           â””â”€â”€ RefreshIndicator
â”‚               â””â”€â”€ ListView
â”‚                   â”œâ”€â”€ Unread Counter Text
â”‚                   â”‚
â”‚                   â””â”€â”€ ListView.builder
â”‚                       â””â”€â”€ NotificationCard (repeating)
â”‚                           â”œâ”€â”€ Icon (colored)
â”‚                           â”œâ”€â”€ Title
â”‚                           â”œâ”€â”€ Message
â”‚                           â”œâ”€â”€ Time
â”‚                           â””â”€â”€ Unread Dot (if unread)
```

## Component Reusability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reusable Components           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚ NotificationCard                â”‚
â”‚ â”œâ”€â”€ Icon (dynamic)              â”‚
â”‚ â”œâ”€â”€ Text content                â”‚
â”‚ â””â”€â”€ State (read/unread)         â”‚
â”‚                                 â”‚
â”‚ Can be extracted to:            â”‚
â”‚ lib/widgets/notification_card   â”‚
â”‚                                 â”‚
â”‚ Usage:                          â”‚
â”‚ NotificationCard(               â”‚
â”‚   notification: notif,          â”‚
â”‚   onTap: () {...}               â”‚
â”‚ )                               â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Integration Points

```
â”Œâ”€ HomeScreen
â”‚  â””â”€ Bell Icon Button
â”‚     â””â”€ onPressed
â”‚        â””â”€ Navigator.push(NotificationsScreen)
â”‚
â”œâ”€ MedicationScreen
â”‚  â””â”€ Bell Icon Button
â”‚     â””â”€ onPressed
â”‚        â””â”€ Navigator.push(NotificationsScreen)
â”‚
â”œâ”€ HealthMetricsHistory
â”‚  â””â”€ Bell Icon Button
â”‚     â””â”€ onPressed
â”‚        â””â”€ Navigator.push(NotificationsScreen)
â”‚
â””â”€ AddMetricsScreen
   â””â”€ Bell Icon Button
      â””â”€ onPressed
         â””â”€ Navigator.push(NotificationsScreen)
```

## Error Handling Flow

```
getNotifications()
â”œâ”€ Success
â”‚  â””â”€ Return notifications list
â”‚
â””â”€ Error
   â”œâ”€ PostgrestException
   â”‚  â””â”€ throw with message
   â”‚
   â””â”€ Generic Exception
      â””â”€ throw with message
         â””â”€ UI shows error state
            â””â”€ User can tap retry
               â””â”€ _loadNotifications()
```

## Time Formatting Logic

```
Time Difference Calculation
â”‚
â”œâ”€ < 1 minute â†’ "Just now"
â”œâ”€ < 1 hour â†’ "Xm ago"
â”œâ”€ < 24 hours â†’ "Xh ago"
â”œâ”€ < 7 days â†’ "Xd ago"
â””â”€ >= 7 days â†’ "MMM d, yyyy"
```

---

This architecture ensures:
- âœ… Clean separation of concerns
- âœ… Reusable components
- âœ… Maintainable code structure
- âœ… Scalable design
- âœ… Easy error handling
- âœ… Future enhancements
